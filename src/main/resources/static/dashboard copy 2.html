<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Loto Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="icon" type="image/png" href="loto_tracker.png">
</head>
<body class="bg-light">
    <!-- HEADER -->
    <header class="header d-flex justify-content-between align-items-center p-3 bg-dark text-white">
        <div class="d-flex align-items-center">
            <img src="loto_tracker.png" alt="Logo Loto" class="logo" style="width: 100px; height: 100px;">
            <h1 class="m-0 ms-2">Dashboard - Loto Tracker</h1>
        </div>
        <div class="d-flex align-items-center" id="userMenu" style="display: none;">
            <span class="me-3">Bienvenue, <span id="userEmail"></span></span>
            <button class="btn btn-danger ms-2" onclick="logout()">Se déconnecter</button>
        </div>
    </header>

    <!-- DASHBOARD -->
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-3">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title">Compte</h5>
                        <p class="card-text">Gérez vos informations personnelles.</p>
                        <a href="profile.html" class="btn btn-primary">Modifier</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title">Tickets</h5>
                        <p class="card-text">Ajoutez et suivez vos tickets.</p>
                        <a href="tickets.html" class="btn btn-primary">Accéder</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title">Statistiques</h5>
                        <p class="card-text">Consultez vos gains et vos tendances.</p>
                        <a href="stats.html" class="btn btn-primary">Voir</a>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title">Résultats</h5>
                        <p class="card-text">Consultez les derniers tirages.</p>
                        <a href="results.html" class="btn btn-primary">Explorer</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer mt-5 p-3 bg-dark text-white text-center">
        <div class="footer-links mb-2">
            <a href="mentions_legales.html" class="text-white me-3">Mentions légales</a>
            <a href="conditions_utilisation.html" class="text-white me-3">Conditions d'utilisation</a>
            <a href="politique_confidentialite.html" class="text-white">Politique de confidentialité</a>
        </div>
        <p class="mb-0">© 2025 Tracker du Loto Français / SDINAHET. Tous droits réservés.</p>
    </footer>

    <!-- <script>
        document.addEventListener("DOMContentLoaded", function () {
            checkAuth();
        });

        function checkAuth() {
            const token = getCookie("jwtToken");
            if (token) {
                const userData = parseJwt(token);
                document.getElementById("userEmail").textContent = userData?.sub;
                document.getElementById("userMenu").style.display = "flex";
            } else {
                window.location.href = "login.html";
            }
        }

        function logout() {
            document.cookie = "jwtToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT";
            window.location.href = "login.html";
        }

        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            return parts.length === 2 ? parts.pop().split(';').shift() : null;
        }

        function parseJwt(token) {
            try {
                const base64Url = token.split('.')[1];
                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                const jsonPayload = decodeURIComponent(atob(base64).split('').map(c =>
                    '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join(''));
                return JSON.parse(jsonPayload);
            } catch (e) {
                console.error("Erreur de décodage du JWT :", e);
                return null;
            }
        }
    </script> -->
</body>
</html>
